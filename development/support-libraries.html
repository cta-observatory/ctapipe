<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Support Libraries &mdash; ctapipe v0.17.1.dev630+g3afb8e35.d20230209</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Making and Accepting Pull Requests" href="pullrequests.html" />
    <link rel="prev" title="Code Guidelines" href="code-guidelines.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ctapipe
          </a>
              <div class="version">
                0.17.1.dev630+g3afb8e35.d20230209
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started_users/index.html">Getting Started For Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started For Developers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Development Guidelines</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="style-guide.html">Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-guidelines.html">Code Guidelines</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Support Libraries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#math-stats">Math/Stats</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multivariate-analysis-and-machine-learning">Multivariate Analysis and Machine Learning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#astronomical-calculations">Astronomical Calculations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tabular-data-processing">Tabular Data Processing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#low-level-fits-table-access">low-level FITS Table Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#low-level-hdf5-table-access">low-level HDF5 Table Access</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#model-fitting">Model Fitting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#graphics-and-plotting">Graphics and Plotting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallelization-and-speed-ups">Parallelization and Speed-ups</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#use-numpy-operations">Use NumPy operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#use-numba">Use Numba</a></li>
<li class="toctree-l4"><a class="reference internal" href="#use-c-c-code-and-wrap-it">Use C/C++ code and wrap it</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pullrequests.html">Making and Accepting Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="maintainer-info.html">Maintainer info</a></li>
<li class="toctree-l2"><a class="reference internal" href="rootmigration.html">For ROOT users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Command-Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_models/index.html">Data Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ctapipe_api/index.html">API Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ctapipe</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Development Guidelines</a></li>
      <li class="breadcrumb-item active">Support Libraries</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/development/support-libraries.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="support-libraries">
<h1>Support Libraries<a class="headerlink" href="#support-libraries" title="Permalink to this headline">¶</a></h1>
<p>In general, we will try to avoid re-implementing complex mathematical
algorithms, and use instead a small set of well-tested, community
supported packages. All packages chosen have large developer
bases, and a wide community of users, ensuring long-term support.</p>
<p>The following are support libraries that are
allowed when developing CTA Pipeline algorithms.  Any new dependencies must
be discussed with the software manager.</p>
<img alt="../_images/py-pipe-dependencies.png" class="align-center" src="../_images/py-pipe-dependencies.png" />
<div class="section" id="math-stats">
<h2>Math/Stats<a class="headerlink" href="#math-stats" title="Permalink to this headline">¶</a></h2>
<p>A large variety of advanced math and statistcs functions can be found
in the <a class="reference external" href="https://www.numpy.org">numpy</a> (data structures and numerics)
and <a class="reference external" href="https://www.scipy.org">scipy</a> packages (advanced mathematics).</p>
<ul class="simple">
<li><p>NumPy user guide : <a class="reference external" href="https://docs.scipy.org/doc/numpy/user/">https://docs.scipy.org/doc/numpy/user/</a> (more high-level)</p></li>
<li><p>NumPy reference  : <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/">https://docs.scipy.org/doc/numpy/reference/</a></p></li>
<li><p>SciPy user guide : <a class="reference external" href="https://docs.scipy.org/doc/scipy/tutorial/index.html">https://docs.scipy.org/doc/scipy/tutorial/index.html</a></p></li>
<li><p>SciPy reference : <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/index.html">https://docs.scipy.org/doc/scipy/reference/index.html</a></p></li>
</ul>
<p>Specific functionality:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code>: statistical models (pdfs, random sampling, etc) for
discrete or continuous distributions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scipy.linalg</span></code>:  fast linear algebra operations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scipy.optimize</span></code>: fitting and minimization</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scipy.integrate</span></code>: integration, including multivariate integration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scipy.signal</span></code>: signal processing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scipy.interpolate</span></code>: interpolation of multi-variate datasets</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scipy.spatial</span></code>: spatial algorithms (clustering, nearest neighbors)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scipy.special</span></code>: special functions</p></li>
</ul>
<p>these functions are all based on <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> data structures,
which provide c-like speeds.</p>
</div>
<div class="section" id="multivariate-analysis-and-machine-learning">
<h2>Multivariate Analysis and Machine Learning<a class="headerlink" href="#multivariate-analysis-and-machine-learning" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://scikit-learn.org">SciKit-Learn</a>, an extension of SciPy, provides
very friendly and well-documented interface to a wide variety of MVA
techniques, both for classification and regression.</p>
<ul class="simple">
<li><p>Decision Trees</p></li>
<li><p>Support vector machines</p></li>
<li><p>Random Forrests</p></li>
<li><p>Perceptrons</p></li>
<li><p>Clustering</p></li>
<li><p>Dimensionality Reduction</p></li>
<li><p>training/cross-checks</p></li>
<li><p>etc.</p></li>
</ul>
</div>
<div class="section" id="astronomical-calculations">
<h2>Astronomical Calculations<a class="headerlink" href="#astronomical-calculations" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://astropy.org">AstroPy</a> is the accepted package for all
astronomical calculations. Specifically:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">astropy.coordinates</span></code>: coordinate transforms and frames</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">astropy.time</span></code>: time transformations and frames</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">astropy.wcs</span></code>: projections</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">astropy.io</span></code>: low-level FITS access</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">astropy.units</span></code>: unit quantities with automatic propegation and
cross-checks</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">astropy.table</span></code>: quick and easy reading of tables in nearly any
format (FITS, ascii, HDF, VO, etc)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">astropy.convolution</span></code>: convolution and filtering (built upon
scipy.signal, but with more robust defaults)</p></li>
</ul>
<p>subpackages of Astropy that are not marked as “reasonable stable” or
“mature” should be avoided until their interfaces are solidified. The
list can be found on the astropy documentation page, under the list
<em>current status of subpackages</em></p>
</div>
<div class="section" id="tabular-data-processing">
<h2>Tabular Data Processing<a class="headerlink" href="#tabular-data-processing" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>We support the following systems to process and manipulate tabular data (e.g.</dt><dd><p>an event list):</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">astropy.table</span></code>: for small table manipulations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytables</span></code>: for direct manipulation of tables in HDF5 files (faster than
other systems for large on-disk files)</p></li>
</ul>
<div class="section" id="low-level-fits-table-access">
<h3>low-level FITS Table Access<a class="headerlink" href="#low-level-fits-table-access" title="Permalink to this headline">¶</a></h3>
<p>FITS Tables can be read via <code class="docutils literal notranslate"><span class="pre">astropy.table</span></code>, or <code class="docutils literal notranslate"><span class="pre">astropy.io.fits</span></code>,
however these implementations are not
intended for efficient access to very large files (As they access all
tables column-wise). In the case we want to load GBs or more of data
in a FITS table, the <code class="docutils literal notranslate"><span class="pre">fitsio</span></code> module should be used instead. It is a
simple wrapper for libCFITSIO, and supports efficient row-wise table
access.</p>
</div>
<div class="section" id="low-level-hdf5-table-access">
<h3>low-level HDF5 Table Access<a class="headerlink" href="#low-level-hdf5-table-access" title="Permalink to this headline">¶</a></h3>
<p>For HDF5 input/output we use <code class="docutils literal notranslate"><span class="pre">pytables</span></code> directly and <code class="docutils literal notranslate"><span class="pre">h5py</span></code> through
<code class="docutils literal notranslate"><span class="pre">astropy.tables</span></code>.</p>
</div>
</div>
<div class="section" id="model-fitting">
<h2>Model Fitting<a class="headerlink" href="#model-fitting" title="Permalink to this headline">¶</a></h2>
<p>We support only <code class="docutils literal notranslate"><span class="pre">scipy.optimize</span></code>,  <code class="docutils literal notranslate"><span class="pre">iminuit</span></code>, and <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> fitting
systems.</p>
</div>
<div class="section" id="graphics-and-plotting">
<h2>Graphics and Plotting<a class="headerlink" href="#graphics-and-plotting" title="Permalink to this headline">¶</a></h2>
<p>We support the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> (recommended for most cases)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bokeh</span></code> (for web-guis)</p></li>
</ul>
</div>
<div class="section" id="parallelization-and-speed-ups">
<h2>Parallelization and Speed-ups<a class="headerlink" href="#parallelization-and-speed-ups" title="Permalink to this headline">¶</a></h2>
<p>Since execution speed is important in some algorithms (particularly those
called per-event), the speed of python can be a hindrance to performance.
The following methods to improve speed are allowed in <code class="docutils literal notranslate"><span class="pre">ctapipe</span></code>:</p>
<div class="section" id="use-numpy-operations">
<h3>Use NumPy operations<a class="headerlink" href="#use-numpy-operations" title="Permalink to this headline">¶</a></h3>
<p>One of the easiest way to speed up code is to attempt to avoid <em>for-loops</em>
(which are slow) by using <code class="docutils literal notranslate"><span class="pre">numpy</span></code> vector and matrix operations instead, as
well as libraries that use them internally (like <code class="docutils literal notranslate"><span class="pre">scipy</span></code> and <code class="docutils literal notranslate"><span class="pre">astropy</span></code>). This
requires no special support, but can sometimes be conceptually difficult to
achieve. If it is not possible, use one of the following supported methods.</p>
</div>
<div class="section" id="use-numba">
<h3>Use Numba<a class="headerlink" href="#use-numba" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">numba</span></code> allows you to automatically compile a python function via the LLVM
compiler backend the first time a funciton is called (“just in time
compilation”). The advantage over cython is that there is no special syntax,
and no compilation step, however as a somewhat “black-box” it does not always
improve your code without some help. See the <code class="docutils literal notranslate"><span class="pre">numba</span></code> documentation for more
info.</p>
</div>
<div class="section" id="use-c-c-code-and-wrap-it">
<h3>Use C/C++ code and wrap it<a class="headerlink" href="#use-c-c-code-and-wrap-it" title="Permalink to this headline">¶</a></h3>
<p>Currently, ctapipe does not have any AoT compiled components.
External C/C++ libraries should provide python bindings, e.g. via <code class="docutils literal notranslate"><span class="pre">pybind11</span></code>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="code-guidelines.html" class="btn btn-neutral float-left" title="Code Guidelines" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pullrequests.html" class="btn btn-neutral float-right" title="Making and Accepting Pull Requests" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright ctapipe developers.  Last updated 09 Feb 2023 14:43.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>